

{% include 'AppBundle::resources.html.twig' %}


{% stylesheets%}

<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/themes/smoothness/jquery-ui.css">
{% endstylesheets %}

{% block javascripts %}
    <script src="{{ asset('bundles/fosjsrouting/js/router.js') }}"></script>
    <script src="{{ path('fos_js_routing_js', {'callback': 'fos.Router.setData'}) }}"></script>
    <script src="{{ asset('bundles/fosjsrouting/js/router.js') }}"></script>
    <script src="{{ path('fos_js_routing_js', {'callback': 'fos.Router.setData'}) }}"></script>
    <script src="//code.jquery.com/jquery-1.11.3.min.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.6/moment.min.js"></script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/fullcalendar/2.4.0/fullcalendar.min.js"></script>


    <script type="text/javascript" src="{{ asset('bundles/app/js/lang-all.js') }}"></script>
    <script type="text/javascript" src="{{ asset('bundles/app/js/calendar-settings.js') }}"></script>
    <script type="text/javascript" src="{{ asset('bundles/app/js/ajaxsave.js') }}"></script>
{% endblock %}

<link rel="stylesheet" type="text/css" href="/bundles/app/css/calendario.css" />

{% block scripts -%}
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.3/angular.min.js"></script>
    <script type="text/javascript">
        angular.module('CalendarModule', [])
                .controller('CalendarCtrl', function($scope, $locale, $http) {
                    $scope.show = true;
                    $scope.changeshow = function(){
                        $scope.show = $scope.show == true ? false : true;

                    }
                }).config(function($interpolateProvider){
                    $interpolateProvider.startSymbol('{[{').endSymbol('}]}');
                });


    </script>
{% endblock %}

<div class="container-fluid new_cal_element">
    <div class="row">
        <div class="large-1 columns " style="height: auto;box-shadow: 1px 1px 10px #888888;z-index: 999;width: 107px;padding-left: 25px;">
            {% include 'default/menu.html.twig' %}
        </div>
        <div class=" large-14 columns">
            <div class="row">
                <style>
                    .inactiveLink
                    {
                        pointer-events: none;
                        cursor: default;
                    }

                    .bg_color
                    {
                        background-color: white !important;
                    }

                    .branco
                    {
                        color: white;
                    }

                    .header
                    {
                        position: fixed;
                        margin-left: 102px;
                        z-index: 999;
                        height: 92px;
                        border-left: 1px solid #DFDFDF;
                        border-bottom: 1px solid #DFDFDF;
                        background: white;
                    }

                    .header_planeamento
                    {
                        position: fixed;
                        margin-left: -5px;
                        z-index: 999;
                        height: 92px;
                        border-left: 1px solid #DFDFDF;
                        border-bottom: 1px solid #DFDFDF;
                        background: white;
                    }

                    .header_agenda
                    {
                        position: fixed;
                        margin-left: 10px;
                        z-index: 999;
                        height: 92px;
                        border-left: 1px solid #DFDFDF;
                        border-bottom: 1px solid #DFDFDF;
                        background: white;
                    }

                    .title
                    {
                        padding: 10px 0 0 1.5625rem !important;

                    }

                    .titulo
                    {
                        padding-top: 10px !important;
                        color: rgb(76, 195, 184);

                    }

                    .button
                    {
                        margin: -3px 1.5625rem 0 0 !important;
                    }

                    .menu_direita
                    {
                        position: relative;
                        margin-left: -44px;
                        margin-top: -12px;
                    }

                    .content
                    {
                        margin-top: 92px !important;
                    }

                    a
                    {
                        cursor: pointer!important;
                    }


                    #tab_sidebar .ui-widget-header
                    {
                        background: none !important;
                        border: none !important;
                    }

                    #tab_sidebar .ui-widget-content
                    {
                        border: none !important;
                    }

                    #tab_sidebar .ui-state-default
                    {
                        border: none !important; background: white !important;
                    }

                    .loading
                    {
                        position: absolute;
                        z-index: 1000;
                        height: 100%;
                        width:  100%;
                        background: white url('/bundles/app/images/ajax-loader.gif') 50% 50% no-repeat;
                    }


                    .sideBarRight {
                        border: 1px solid #E6E6E6!important;
                        margin-top: 32px;
                        width: 300px;
                        height:500px;
                        max-height: 600px;
                        overflow-y: scroll;
                        overflow-x: hidden;
                        background-color: #ffffff;
                        position: fixed;
                        z-index: 10;
                        top: 60px;
                        right: 0px;
                        transition: all 350ms cubic-bezier(0.19, 1, 0.22, 1);
                    }

                    #tab_sidebar .material-tabs.nav-tabs > li.active > a:hover, #tab_sidebar .material-tabs.nav-tabs > li.active > a:focus:hover {
                        border: none;
                        color: #139c9b;
                    }
                    #tab_sidebar .material-tabs.nav-tabs > li.active > a, #tab_sidebar .material-tabs.nav-tabs > li.active > a:focus {
                        border: none;
                        -webkit-box-shadow: inset 0 -2px 0 #139c9b;
                        -moz-box-shadow: inset 0 -2px 0 #139c9b;
                        box-shadow: inset 0 -2px 0 #139c9b;
                        color: #139c9b;
                    }
                    #tab_sidebar .material-tabs.nav-tabs > li > a:hover, #tab_sidebar .material-tabs.nav-tabs > li > a:focus:hover {
                        background-color: transparent;
                        -webkit-box-shadow: inset 0 -2px 0 #139c9b;
                        -moz-box-shadow: inset 0 -2px 0 #139c9b;
                        box-shadow: inset 0 -2px 0 #139c9b;
                        color: #139c9b;
                    }

                    #tab_sidebar .material-tabs.nav-tabs > li > a, #tab_sidebar .material-tabs.nav-tabs > li > a:focus {
                        margin-right: 0;
                        border: none;
                        -webkit-box-shadow: inset 0 -1px 0 #dddddd;
                        -moz-box-shadow: inset 0 -1px 0 #dddddd;
                        box-shadow: inset 0 -1px 0 #dddddd;
                        -webkit-transition: all 0.2s;
                        -o-transition: all 0.2s;
                        transition: all 0.2s;
                        -webkit-transition: all all 0.2s ease-out;
                        -moz-transition: all all 0.2s ease-out;
                        -o-transition: all all 0.2s ease-out;
                        transition: all all 0.2s ease-out;
                    }

                    #tab_sidebar .nav-tabs > li.active > a, #tab_sidebar .nav-tabs > li.active > a:hover, #tab_sidebar .nav-tabs > li.active > a:focus {
                        color: #555555;
                        background-color: #ffffff;
                        border: 1px solid #dddddd;
                        border-bottom-color: transparent;
                        cursor: default;
                    }


                    #tab_sidebar .nav-tabs > li > a:hover {
                        border-color: #eeeeee #eeeeee #dddddd;
                    }

                    #tab_sidebar .nav > li > a:hover, #tab_sidebar .nav > li > a:focus {
                        text-decoration: none;
                        background-color: #eeeeee;
                    }

                    #tab_sidebar .nav > li > a {
                        position: relative;
                        display: block;
                    }

                    a:active, a:focus {
                        outline: 0;
                    }

                    .tabulador{
                        font-size: 14px;
                        font-weight: bold;
                    }

                    .img_block{
                        display: flex;
                        display: -webkit-flex;
                        overflow-x: scroll;
                        overflow-y: hidden;
                        margin-bottom:30px;
                        height:72px;

                    }

                    .circle_image {
                        border-radius: 50%;
                        margin-right: 5px;
                        height: 30px;
                        width: 30px;
                    }

                    .roundedOne {
                        left: -118px;
                        width: 15px;
                        height: 15px;
                        background: #fcfff4;

                        background: -webkit-linear-gradient(top, white 0%, white 40%, white 100%);
                        background: -moz-linear-gradient(top, white 0%, white 40%, white 100%);
                        background: -o-linear-gradient(top, white 0%, white 40%, white 100%);
                        background: -ms-linear-gradient(top, white 0%, white 40%, white 100%);
                        background: linear-gradient(top, white 0%, white 40%, white 100%);
                        filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#fcfff4', endColorstr='#b3bead',GradientType=0 );
                        margin: 20px auto;

                        -webkit-border-radius: 50px;
                        -moz-border-radius: 50px;
                        border-radius: 50px;

                        -webkit-box-shadow: inset 0px 1px 1px white, 0px 1px 3px rgba(0,0,0,0.5);
                        -moz-box-shadow: inset 0px 1px 1px white, 0px 1px 3px rgba(0,0,0,0.5);
                        box-shadow: inset 0px 1px 1px white, 0px 1px 3px rgba(0,0,0,0.5);
                        position: relative;
                    }

                    .roundedOne label {
                        cursor: pointer;
                        position: absolute;
                        width: 15px;
                        height: 15px;

                        -webkit-border-radius: 50px;
                        -moz-border-radius: 50px;
                        border-radius: 50px;
                        left: -8px;
                        top: 0px;

                    }

                    .roundedOne label:after {
                        -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
                        filter: alpha(opacity=0);
                        opacity: 0;
                        content: '';
                        position: absolute;
                        width: 20px;
                        height: 20px;
                        background: #00bf00;

                        background: -webkit-linear-gradient(top, rgb(76, 195, 184) 0%, rgb(76, 195, 184) 100%);
                        background: -moz-linear-gradient(top, rgb(76, 195, 184) 0%, rgb(76, 195, 184) 100%);
                        background: -o-linear-gradient(top, rgb(76, 195, 184) 0%, rgb(76, 195, 184) 100%);
                        background: -ms-linear-gradient(top, rgb(76, 195, 184) 0%, rgb(76, 195, 184) 100%);
                        background: linear-gradient(top, rgb(76, 195, 184) 0%, rgb(76, 195, 184) 100%);

                        -webkit-border-radius: 50px;
                        -moz-border-radius: 50px;
                        border-radius: 50px;

                        -webkit-box-shadow: inset 0px 1px 1px white, 0px 1px 3px rgba(0,0,0,0.5);
                        -moz-box-shadow: inset 0px 1px 1px white, 0px 1px 3px rgba(0,0,0,0.5);
                        box-shadow: inset 0px 1px 1px white, 0px 1px 3px rgba(0,0,0,0.5);
                    }

                    .esconde {
                        margin: 0 0 1rem 0;
                        visibility: hidden;
                    }

                    p.agenda
                    {
                        font-size: 13px;
                        margin-top: -38px !important;
                        margin-left: 30px !important;
                    }


                    .line {
                        width: 1px;
                        top: -19px;
                        left: -5px;
                        height: 44px;
                        background-color: black;
                        position: relative;
                    }

                    .imagem_esquerda {
                        margin-top: 26px;
                        margin-left: 13px;
                    }

                    .imagem_direita {
                        margin-top: 15px;
                        margin-left: 220px;
                    }

                    #texto_imp {
                        margin-bottom: 15px;
                        height: 40px;
                        width: 216px;
                        margin-right: 5px;
                        min-height: 0 !important;
                        display: initial !important;
                        background-color: #f6f6f6;
                        border: none!important;
                        border-color: transparent!important;

                    }

                    #textoimp:focus{
                        outline: none;
                    }

                    .botao_enviar{
                        margin-top: -52px;
                        display: block!important;
                        margin-left: 230px;
                        padding: 0 0 0 0 !important;
                    }

                    .triangle-isosceles.dir {
                        margin-left: 38px;
                        background: #E6E6E6;
                        margin-top: -45px;
                        margin-bottom: 3px;

                    }

                    .triangle-isosceles.esq {
                        margin-left: 70px;
                        background: #9ED9CF;
                        margin-top: -45px;
                        margin-bottom: 14px;
                    }

                    .triangle-isosceles {
                        position: relative;
                        padding: 15px;
                        margin: 1em 0 3em;
                        color: #000;
                        font-size: 13px;
                        background: #139c9b;
                        width: 153px;
                        -webkit-border-radius: 10px;
                        -moz-border-radius: 10px;
                        border-radius: 10px;
                    }

                    .triangle-isosceles:after {
                        content: "";
                        position: absolute;
                        bottom: -15px;
                        left: 50px;
                        border-width: 15px 15px 0;
                        border-style: solid;
                        border-color: #139c9b transparent;
                        display: block;
                        width: 0;
                    }

                    .triangle-isosceles.esq:after {
                        top: 20px;
                        left: -16px;
                        bottom: auto;
                        border-width: 6px 16px 5px 0;
                        border-color: transparent #9ED9CF;
                    }

                    .triangle-isosceles.dir:after {
                        top: 19px;
                        right: -16px;
                        bottom: auto;
                        left: auto;
                        border-width: 6px 0 5px 16px;
                        border-color: transparent #E6E6E6;
                    }

                    p.quebra{
                        overflow-wrap: break-word;
                        word-wrap: break-word;

                        -ms-word-break: break-all;
                        word-break: break-all;

                        -ms-hyphens: auto;
                        -moz-hyphens: auto;
                        -webkit-hyphens: auto;
                        hyphens: auto;
                    }

                    .legenda_user {
                        position: absolute;
                        font-weight: bold;
                        margin-top: 1px;
                        margin-left: 13px;
                        text-align: center;
                        padding: 1px;
                        color: white;
                        font-size: 9px;
                        background: rgba(76,195,184,1);
                        -webkit-border-radius: 10px;
                        -moz-border-radius: 10px;
                        border-radius: 10px;
                    }


                    .legenda_user:after {
                        content: "";
                        position: absolute;
                        bottom: -4px;
                        left: 6px;
                        text-align: center;
                        border-width: 4px 4px 0px;
                        border-style: solid;
                        border-color: rgba(76,195,184,1) transparent;
                        display: block;
                        width: 0px;
                    }

                    .img_align{
                        margin-top: 23px;
                        margin-left: 9px;
                    }

                    #tab_sidebar .ui-tabs, #tab_sidebar .ui-tabs-panel{
                        padding: 0em 0em !important;
                    }

                    #tab_sidebar .ui-tabs, #tab_sidebar .ui-tabs-nav, #tab_sidebar .ui-tabs-anchor {
                        padding: 0.5em 25px !important;
                    }

                    .h6{
                        margin-top: -10px;
                        margin-bottom: 20px;
                        font-size: 17px;
                        font-weight: bold;

                    }

                    .botao_redondo {
                        display: inline-block;
                        width: 20px;
                        height: 20px;
                        border: 3px solid #333;
                        border-radius: 50%;
                    }

                    .circulo
                    {
                        margin-left: 245px;
                        position: absolute;
                        width:15px;
                        height:15px;
                        border-radius:50%;
                        font-size:10px;
                        color:#fff;
                        line-height:15px;
                        text-align:center;
                        background:red;
                        margin-top: -30px;
                    }

                    .circulo_menu_direita {
                        margin-left: 74px;
                        position: absolute;
                        width: 12px;
                        height: 12px;
                        border-radius: 50%;
                        color: #fff;
                        line-height: 15px;
                        text-align: center;
                        background: red;
                        margin-top: 18px;
                    }


                    .sms_n_lidas
                    {
                        font-size: 10px;
                        font-weight: bold;
                        margin-top: 10px;
                        margin-bottom: 0px!important;
                        color: rgba(76,195,184,0.7);
                        text-align: center;
                    }

                    .circulo_verde {
                        margin-left: 35px;
                        position: absolute;
                        width: 8px;
                        height: 8px;
                        border-radius: 50%;
                        color: #fff;
                        line-height: 15px;
                        text-align: center;
                        background: #84cd5d;
                        margin-top: -38px;
                    }

                    .medidas_imagem_botao
                    {
                        border-top: 1px solid #dfdfdf;
                        border-bottom: 1px solid #dfdfdf;
                        padding-top:10px;
                        padding-bottom:10px;
                        margin-bottom: 20px;
                    }

                </style>

                <div class="large-16 columns no-padding" >
                    {% include 'default/topheader.html.twig' %}
                </div>
            </div>
            <div class="row">
                <div class="large-10 columns no-padding">

                    {% block body -%}

                        {{ form(form) }}

                    {% endblock %}

                </div>

            </div>
        </div>
    </div>
</div>

<script>
    function sendForm(form, callback) {
        // Get all form values
        var values = {};
        $.each( form[0].elements, function(i, field) {
            if (field.type != 'checkbox' || (field.type == 'checkbox' && field.checked)) {
                values[field.name] = field.value;
            }
        });

        // Post form
        $.ajax({
            type        : 'POST',
            url         : '/app_dev.php/agenda/calendar/newshort',
            data        : values,
            success     : function(result) { callback( result ); }
        });
    }
    $(function() {
        $('#submit_short_calendar').on('click', function( e ){
            e.preventDefault();
            $("#cal_new_event").css( {display:"none"});
            sendForm( $('#short_calendar'), function( response ){

                var data = JSON.parse(response);
                $('#calendar-holder').fullCalendar('renderEvent',
                        {
                            id: data.events.event.id,
                            title: data.events.event.title,
                            start: data.events.event.startdate,
                            end: data.events.event.enddate,
                            allDay: data.events.event.allday == 1 ? true : false
                        }
                );
                $('#calendar-holder').fullCalendar('rerenderEvents')
            });
        });
    });
</script>


